{% block content %}
{% load static %}
<link rel="stylesheet" href="{% static 'task/style.css' %}">

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
<script>
    
    $(document).ready(function(){
        
            const loadBtn = document.getElementById('load-btn')
            const taskTitle = document.getElementsByClassName('.task-title')
            const taskList = document.getElementById('display')
            let visible = document.getElementById('task-len').innerText
            
            const handleGetData = () => {
                $.ajax({
                    type:'GET',
                    url: `gettasks/${visible}`,
                    success: function(response){
                        const data = response.data
                        console.log(data)
                        data.reverse()
                        data.map(post=>{
                            const date = new Date(post.datecreatedtask)
                            let li = document.createElement('li')
                            li.innerHTML += `<div class="display">
                                    <p class="display__element-id element-id element">${post.id}</p>
                                    <p class="display__element-title element-title element">${post.titletask}</p>
                                    <p class="display__element-datecreated element-datecreated element">${date.getDate()}.${date.getMonth() + 1}.${date.getFullYear()}</p>
                                    <p class="display__element-important element-important element">${post.importanttask}</p>
                                    <p class="display__element-user element-user element">${post.user}</p>
                                </div>`
                            taskList.append(li)
                        })
                    },
                    error: function(response){
                    
                    }
                });
                
            }

    
            $(document).ready(function(){
                handleGetData()
            })
        
            loadBtn.addEventListener('click', ()=>{
                visible -= 3
                handleGetData()
            })
        
    });
</script>

current
<p id="task-len">{{ len }}</p><p>заданий</p>
<ul id="display">
    <li class="display">
        <p class="display__element-id element-id element">id</p>
        <p class="display__element-title element-title element">Заголовок</p>
        <p class="display__element-datecreated element-datecreated element">Дата&nbspсоздания</p>
        <p class="display__element-important element-important element">Важность</p>
        <p class="display__element-user element-user element">Имя пользователя</p>
    </li>
</ul>
<button id="load-btn">Добавить</button>


{% endblock %}